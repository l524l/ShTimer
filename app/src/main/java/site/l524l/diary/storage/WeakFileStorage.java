package site.l524l.diary.storage;

import com.google.gson.Gson;

import java.io.File;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;

import site.l524l.diary.entity.Weak;

public class WeakFileStorage {
    //private static final String FAVORITE_WEAK = "{\"dayList\":[{\"dayOfWeak\":\"MONDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]},{\"dayOfWeak\":\"TUESDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]},{\"dayOfWeak\":\"WEDNESDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]},{\"dayOfWeak\":\"THURSDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]},{\"dayOfWeak\":\"FRIDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]},{\"dayOfWeak\":\"SATURDAY\",\"lessons\":[{\"name\":\"1 Пара\",\"startTime\":\"08:30\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"2 Пара\",\"startTime\":\"10:15\",\"endTime\":\"11:50\",\"aBreak\":10},{\"name\":\"3 Пара\",\"startTime\":\"12:00\",\"endTime\":\"13:35\",\"aBreak\":45},{\"name\":\"4 Пара\",\"startTime\":\"14:20\",\"endTime\":\"15:55\",\"aBreak\":10},{\"name\":\"5 Пара\",\"startTime\":\"16:05\",\"endTime\":\"17:40\",\"aBreak\":10},{\"name\":\"6 Пара\",\"startTime\":\"17:50\",\"endTime\":\"19:25\",\"aBreak\":10},{\"name\":\"7 Пара\",\"startTime\":\"19:35\",\"endTime\":\"21:10\",\"aBreak\":20}]}]}";
    private static final String FAVORITE_WEAK = "{\"dayList\":[{\"dayOfWeak\":\"MONDAY\",\"lessons\":[{\"name\":\"Разговоры о важном\",\"startTime\":\"08:30\",\"endTime\":\"09:10\",\"aBreak\":15},{\"name\":\"География\",\"startTime\":\"09:25\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"Русский язык\",\"startTime\":\"10:15\",\"endTime\":\"10:55\",\"aBreak\":10},{\"name\":\"ОБЖ\",\"startTime\":\"11:05\",\"endTime\":\"11:45\",\"aBreak\":30},{\"name\":\"Англ язык\",\"startTime\":\"12:15\",\"endTime\":\"12:55\",\"aBreak\":10},{\"name\":\"Биология\",\"startTime\":\"13:05\",\"endTime\":\"13:45\",\"aBreak\":10},{\"name\":\"История\",\"startTime\":\"13:55\",\"endTime\":\"14:35\",\"aBreak\":30}]},{\"dayOfWeak\":\"TUESDAY\",\"lessons\":[{\"name\":\"Русский язык\",\"startTime\":\"08:30\",\"endTime\":\"09:10\",\"aBreak\":15},{\"name\":\"Общество\",\"startTime\":\"09:25\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"Математика\",\"startTime\":\"10:15\",\"endTime\":\"10:55\",\"aBreak\":10},{\"name\":\"Физика\",\"startTime\":\"11:05\",\"endTime\":\"11:45\",\"aBreak\":30},{\"name\":\"Литература\",\"startTime\":\"12:15\",\"endTime\":\"12:55\",\"aBreak\":10},{\"name\":\"Родной язык\",\"startTime\":\"13:05\",\"endTime\":\"13:45\",\"aBreak\":10},{\"name\":\"Физ-ра\",\"startTime\":\"13:55\",\"endTime\":\"14:35\",\"aBreak\":30}]},{\"dayOfWeak\":\"WEDNESDAY\",\"lessons\":[{\"name\":\"Физика\",\"startTime\":\"08:30\",\"endTime\":\"09:10\",\"aBreak\":15},{\"name\":\"Химия\",\"startTime\":\"09:25\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"Общество\",\"startTime\":\"10:15\",\"endTime\":\"10:55\",\"aBreak\":10},{\"name\":\"Англ язык\",\"startTime\":\"11:05\",\"endTime\":\"11:45\",\"aBreak\":30},{\"name\":\"Математика\",\"startTime\":\"12:15\",\"endTime\":\"12:55\",\"aBreak\":10},{\"name\":\"Математика\",\"startTime\":\"13:05\",\"endTime\":\"13:45\",\"aBreak\":10},{\"name\":\"Математика (Э/к)\",\"startTime\":\"13:55\",\"endTime\":\"14:35\",\"aBreak\":30}]},{\"dayOfWeak\":\"THURSDAY\",\"lessons\":[{\"name\":\"Англ язык\",\"startTime\":\"08:30\",\"endTime\":\"09:10\",\"aBreak\":15},{\"name\":\"Математика\",\"startTime\":\"09:25\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"Информатика\",\"startTime\":\"10:15\",\"endTime\":\"10:55\",\"aBreak\":10},{\"name\":\"Физра\",\"startTime\":\"11:05\",\"endTime\":\"11:45\",\"aBreak\":30},{\"name\":\"Литература\",\"startTime\":\"12:15\",\"endTime\":\"12:55\",\"aBreak\":10},{\"name\":\"История\",\"startTime\":\"13:05\",\"endTime\":\"13:45\",\"aBreak\":10},{\"name\":\"Инд. пр.\",\"startTime\":\"13:55\",\"endTime\":\"14:35\",\"aBreak\":30}]},{\"dayOfWeak\":\"FRIDAY\",\"lessons\":[{\"name\":\"Русский язык\",\"startTime\":\"08:30\",\"endTime\":\"09:10\",\"aBreak\":15},{\"name\":\"Литература\",\"startTime\":\"09:25\",\"endTime\":\"10:05\",\"aBreak\":10},{\"name\":\"Математика\",\"startTime\":\"10:15\",\"endTime\":\"10:55\",\"aBreak\":10},{\"name\":\"Математика\",\"startTime\":\"11:05\",\"endTime\":\"11:45\",\"aBreak\":30},{\"name\":\"Физ-ра\",\"startTime\":\"12:15\",\"endTime\":\"12:55\",\"aBreak\":10},{\"name\":\"Русский язык (Э/к)\",\"startTime\":\"13:05\",\"endTime\":\"13:45\",\"aBreak\":10},{\"name\":\"-\",\"startTime\":\"13:55\",\"endTime\":\"14:35\",\"aBreak\":30}]}]}";
    private final File weakFile;
    private final Gson gson = new Gson();

    public WeakFileStorage(File filesDir) {
        this.weakFile = new File(filesDir,"weak.json");
    }

    public Weak loadFavoriteWeak(){
        return gson.fromJson(FAVORITE_WEAK, Weak.class);
    }
    public Weak loadWeak() throws Exception {
        if (isFileExist()){
            byte[] raw = Files.readAllBytes(weakFile.toPath());
            String weak = new String(raw,"utf-8");
            return gson.fromJson(weak, Weak.class);
        } else throw new Exception();
    }
    public void uploadWeak(String weak) throws Exception {
        Files.write(weakFile.toPath(),weak.getBytes(StandardCharsets.UTF_8));
    }
    public void uploadWeak(Weak weak) throws Exception {
        uploadWeak(gson.toJson(weak));
    }
    public boolean isFileExist() {
        return weakFile.exists();
    }
}
